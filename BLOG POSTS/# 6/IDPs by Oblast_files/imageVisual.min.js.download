"use strict";var powerbi;!function(e){var i;!function(e){var i=jsCommon.BrowserUtils,t=jsCommon.Utility,a=function(){function a(){this.scalingType=e.imageScalingType.normal}return a.prototype.init=function(e){this.element=e.element,this.hostServices=e.host},a.prototype.enumerateObjectInstances=function(e){switch(e.objectName){case"imageScaling":return this.enumerateImageScaling()}return null},a.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},a.prototype.onViewModeChanged=function(e){this.updateVisualLinkProps()},a.prototype.update=function(a){var n=this,s=a.dataViews;if(s&&0!==s.length){var o=s[0].metadata.objects;if(o&&o.general){var r=this.imageBackgroundElement;r||(r=$("<div class='imageBackground' />"),r.click(function(e){var t={visualObjects:[{objectName:"image",selectorsByColumn:{}}],isCtrlOrMetaKey:i.isCtrlOrMeta(e),position:{x:e.clientX,y:e.clientY}};n.hostServices.onSelecting(t),1===t.action&&e.stopPropagation()}),this.imageBackgroundElement=r,this.imageBackgroundElement.appendTo(this.element));var c=a.viewport;r.css("height",c.height),o.imageScaling?this.scalingType=o.imageScaling.imageScalingType.toString():this.scalingType=e.imageScalingType.normal;var l=o.general.imageUrl;t.isLocalUrl(l)&&r.css("backgroundImage","url("+l+")"),this.scalingType===e.imageScalingType.fit?r.css("background-size","100% 100%"):this.scalingType===e.imageScalingType.fill?r.css("background-size","cover"):r.css("background-size","contain"),this.updateVisualLinkProps()}}},a.prototype.updateVisualLinkProps=function(){var e=this.hostServices.getVisualLinkProperties();e&&this.imageBackgroundElement&&this.imageBackgroundElement.attr("title",e.title).css("cursor",e.hasVisualLink?"pointer":"inherit")},a}();e.ImageVisual=a}(i=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));