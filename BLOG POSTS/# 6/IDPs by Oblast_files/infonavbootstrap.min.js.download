"use strict";var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(a,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new t(function(n){n(e.value)}).then(i,s)}c((r=r.apply(e,n||[])).next())})},__generator=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,o&&(i=2&t[0]?o.return:t[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,t[1])).done)return i;switch(o=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,o=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(i=c.trys,!(i=i.length>0&&i[i.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){c.label=t[1];break}if(6===t[0]&&c.label<i[1]){c.label=i[1],i=t;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(t);break}i[2]&&c.ops.pop(),c.trys.pop();continue}t=n.call(e,c)}catch(e){t=[6,e],o=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a,o,i,s,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},powerbi;!function(e){var n;!function(n){function t(n){var t=n[0].toLowerCase()+n.slice(1),r=e.infonav.components[n];angular.module("powerbi.infonavbootstrap").component(t,r)}angular.module("powerbi.infonavbootstrap",["powerbi.common"]).run(["scopedProvider",function(e){e.register("interpretProbe",{services:["promiseFactory","$timeout","featureSwitchService"],scopedServices:["lazyScoped"],fn:function(e,t,r,a){return n.services.createInterpretProbeService(a,e,t,r)}})}]),n.registerInfonavBootstrapComponent=t}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(e){var n;!function(e){e.LanguageNotSupported="LanguageNotSupported",e.BuildingLanguageModel="BuildingLanguageModel",e.BuildingDataIndex="BuildingDataIndex",e.UpdatingLanguageModel="UpdatingLanguageModel",e.UpdatingDataIndex="UpdatingDataIndex",e.FailedToUpdateLanguageModel="FailedToUpdateLanguageModel",e.FailedToUpdateIndex="FailedToUpdateDataIndex",e.FailedToBuildIndex="FailedToBuildDataIndex",e.SessionIsInactive="SessionIsInactive",e.MissingRuntimeModule="MissingRuntimeModule"}(n=e.HostWarningConstants||(e.HostWarningConstants={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(e){var n;!function(e){e.QnaCoreModule={name:"powerbi.qnacore",namespace:"powerbi.explore.infonav",dependency:{javascript:"qnacore",css:["qnacore"]}},e.QnaWebModule={name:"powerbi.qnaweb",namespace:"powerbi.explore.infonav",dependency:{javascript:"qnaweb",css:["qnaweb"]}}}(n=e.modules||(e.modules={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(e){var n;!function(e){e.openTileAction="/openQnA",e.openTileEventName="openQnaTile",e.pinSelectedVisual="pinSelectedVisual",e.showQnaStart="showQnaStart",e.ScopedInstanceProviderName="infonav",e.DefaultVisualMaxWidth=1024,e.DefaultVisualMaxHeight=768}(n=e.constants||(e.constants={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(e){var n;!function(e){var n;!function(e){function n(e,n){return r(t(n),e)}function t(e){var n;if(_.isEmpty(e))return n;for(var t=0,r=e;t<r.length;t++){var a=r[t];if(n&&a.Language!==n){n=void 0;break}n=a.Language}return n}function r(e,n){var t="";if(e){var r=!1,i=a(n.currentLanguageLocale);e=a(e);var s=o[e];s&&(t=s.resStringSuffix,r=s.preview),r||e!==i||(t="")}return n.get("Qna_Input_Placeholder"+t)}function a(e){if(e){return e.split("-")[0].toLowerCase()}}var o={en:{resStringSuffix:"_English"},es:{resStringSuffix:"_Spanish",preview:!0}};e.getPlaceholderText=n}(n=e.QnaLanguageUtil||(e.QnaLanguageUtil={}))}(n=e.utils||(e.utils={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(n){var t;!function(n){var t,r=e.common.helpers.ModelConverterHelper;!function(e){function n(e,n){return{InterpretRequestSubscopes:_(e).filter(function(e){return e&&e.model&&r.getIsQnaSupported(e.model,n)&&!_.isEmpty(e.model.vsName)&&!_.isEmpty(e.model.dbName)}).map(function(e){return{DbMoniker:{VirtualServerName:e.model.vsName,DatabaseName:e.model.dbName},ReportIds:e.reportIds}}).value()}}function t(e,n){return{model:e,reportIds:n}}function a(e){if(e)return e.replace(/^Show /,"Showing ")}e.createInterpretRequestScopeWireContract=n,e.createInterpretRequestScope=t,e.updateRestatement=a}(t=n.InterpretUtil||(n.InterpretUtil={}))}(t=n.utils||(n.utils={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(n){var t;!function(n){var t,r=jsCommon.Lazy,a=e.visuals.plugins;!function(e){function n(e){return i.getValue()[e]}function t(e){return s.getValue()[e]}function o(e,n){for(var t=[],r={},a=0,o=n.length;a<o;a++){var i=n[a];r[i.vsName+i.dbName]=i}for(var s=e.configs,c=0,l=s.length;c<l;c++){var u=s[c],p=u.Query||e.queryDefn,d=u.DataShapeBinding||e.dataShapeBinding,f=u.QueryMetadata||e.queryMetadata,i=r[e.virtualServerName+e.databaseName];null!=i&&t.push({config:{Query:p,QueryMetadata:f,DataShapeBinding:d,VisualizationType:u.VisualizationType,VisualElements:u.VisualElements,InsightType:u.InsightType},model:i,dataViewSource:e.dataViewSource})}return t}var i=new r(function(){var e={};return e[3]=a.card,e[13]=a.lineClusteredColumnComboChart,e[29]=a.multiRowCard,e[7]=a.clusteredBarChart,e[10]=a.clusteredColumnChart,e[20]=a.donutChart,e[16]=a.funnel,e[30]=a.gauge,e[22]=a.heatMap,e[9]=a.hundredPercentStackedBarChart,e[12]=a.hundredPercentStackedColumnChart,e[4]=a.lineChart,e[1]=a.map,e[19]=a.filledMap,e[2]=a.pivotTable,e[5]=a.pieChart,e[6]=a.scatterChart,e[8]=a.barChart,e[11]=a.columnChart,e[0]=a.tableEx,e[17]=a.treemap,e[23]=a.waterfallChart,e[26]=a.stackedAreaChart,e[32]=a.areaChart,e[33]=a.ribbonChart,e}),s=new r(function(){var e={};return e[a.card.name]=3,e[a.lineClusteredColumnComboChart.name]=13,e[a.multiRowCard.name]=29,e[a.clusteredBarChart.name]=7,e[a.clusteredColumnChart.name]=10,e[a.donutChart.name]=20,e[a.funnel.name]=16,e[a.gauge.name]=30,e[a.heatMap.name]=22,e[a.hundredPercentStackedBarChart.name]=9,e[a.hundredPercentStackedColumnChart.name]=12,e[a.lineChart.name]=4,e[a.map.name]=1,e[a.filledMap.name]=19,e[a.matrix.name]=2,e[a.pivotTable.name]=2,e[a.pieChart.name]=5,e[a.scatterChart.name]=6,e[a.barChart.name]=8,e[a.columnChart.name]=11,e[a.table.name]=0,e[a.tableEx.name]=0,e[a.treemap.name]=17,e[a.waterfallChart.name]=23,e[a.stackedAreaChart.name]=26,e[a.areaChart.name]=32,e[a.ribbonChart.name]=33,e});e.getPlugin=n,e.getType=t,e.interpretResultToConfig=o}(t=n.visualUtil||(n.visualUtil={}))}(t=n.utils||(n.utils={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(n){var t;!function(n){var t;!function(n){var t,r=e.visuals.plugins,a=e.explore.QueryProjectionBuilderCoreUtils.QueryProjectionBuilder,o=e.infonav.utils.visualUtil;!function(e){function n(e,n,t){var r=o.getPlugin(e);if(null!=r){var a;switch(e){case 3:case 29:case 0:a=new i(r,n,t);break;case 2:a=new m(r,n,t);break;case 20:case 16:case 4:case 26:case 32:case 5:a=new s(r,n,t);break;case 23:a=new c(r,n,t);break;case 7:case 10:case 9:case 12:case 8:case 11:case 33:case 13:a=new l(r,n,t);break;case 1:case 22:a=new d(r,n,t);break;case 19:a=new f(r,n,t);break;case 17:a=new h(r,n,t);break;case 6:a=new p(r,n,t);break;case 30:a=new u(r,n,t);break;default:return}return a}}e.createProjectionBuilder=n}(t=n.QueryProjectionBuilderUtils||(n.QueryProjectionBuilderUtils={}));var i=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 1===e.length&&e[0].name===a.ValuesRole},n.prototype.build=function(e){var n={};if(1===this.projectionsInfo.length)return a.addValuesRole(n,this.projectionsInfo[0]),n;for(var t=e.Primary.Groupings,r=t[0].Projections,o=0,i=r.length;o<i;o++)a.addValuesRole(n,this.projectionsInfo[r[o]]);return n},n}(a),s=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return this.plugin.name===r.funnel.name?4===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.YRole&&e[2].name===a.GradientRole&&e[3].name===a.TooltipRole:4===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.YRole&&e[3].name===a.TooltipRole},n.prototype.build=function(e){var n=e.Primary.Groupings,t={};if(this.processPrimaryGroup(n[0],t),e.Secondary){var r=e.Secondary.Groupings;1===r.length&&this.processSecondaryGroup(r[0],t)}return t},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=t[r],s=this.projectionsInfo[i];0===s.metadata.kind?(a.addCategoryRole(n,s),n[a.CategoryRole].addActiveQueryReference(s.projection.queryRef)):1===s.metadata.kind&&a.addYRole(n,s)}},n.prototype.processSecondaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=t[r];a.addSeriesRole(n,this.projectionsInfo[i])}},n}(a),c=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.processSecondaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=t[r];a.addBreakdownRole(n,this.projectionsInfo[i])}},n}(s),l=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return this.plugin.name===r.ribbonChart.name?4===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.YRole&&e[3].name===a.TooltipRole:5===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.YRole&&e[3].name===a.GradientRole&&e[4].name===a.TooltipRole},n}(s),u=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 5===e.length&&e[0].name===a.YRole&&e[1].name===a.MinValueRole&&e[2].name===a.MaxValueRole&&e[3].name===a.TargetValueRole&&e[4].name===a.TooltipRole},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=0,i=t;o<i.length;o++){var s=i[o],c=this.projectionsInfo[s];if(1===c.metadata.kind){switch(r){case 0:a.addYRole(n,c);break;case 1:a.addTargetValueRole(n,c);break;case 2:a.addMaxValueRole(n,c);break;case 3:a.addMinValueRole(n,c);break;case 4:a.addTooltipRole(n,c)}r++}}},n}(s),p=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 8===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.XRole&&e[3].name===a.YRole&&e[4].name===a.SizeRole&&e[5].name===a.GradientRole&&e[6].name===a.PlayRole&&e[7].name===a.TooltipRole},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=0,i=t.length;o<i;o++){var s=t[o],c=this.projectionsInfo[s];if(0===c.metadata.kind)a.addCategoryRole(n,c);else if(1===c.metadata.kind){switch(r){case 0:a.addXRole(n,c);break;case 1:a.addYRole(n,c);break;case 2:a.addSizeRole(n,c);break;case 3:a.addGradientRole(n,c);break;case 4:a.addTooltipRole(n,c)}r++}}},n}(s),d=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 7===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.YRole&&e[3].name===a.XRole&&e[4].name===a.SizeRole&&e[5].name===a.GradientRole&&e[6].name===a.TooltipRole},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=0,i=t;o<i.length;o++){var s=i[o],c=this.projectionsInfo[s];if(0===c.metadata.kind)a.addCategoryRole(n,c);else if(1===c.metadata.kind){switch(r){case 0:a.addSizeRole(n,c);break;case 1:a.addXRole(n,c);break;case 2:a.addYRole(n,c);break;case 3:a.addGradientRole(n,c);break;case 4:a.addTooltipRole(n,c)}r++}}},n}(s),f=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 6===e.length&&e[0].name===a.CategoryRole&&e[1].name===a.SeriesRole&&e[2].name===a.YRole&&e[3].name===a.XRole&&e[4].name===a.SizeRole&&e[5].name===a.TooltipRole},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=0,i=t;o<i.length;o++){var s=i[o],c=this.projectionsInfo[s];if(0===c.metadata.kind)a.addCategoryRole(n,c);else if(1===c.metadata.kind){switch(r){case 0:a.addSizeRole(n,c);break;case 1:a.addXRole(n,c);break;case 2:a.addYRole(n,c);break;case 3:a.addTooltipRole(n,c)}r++}}},n}(s),h=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 5===e.length&&e[0].name===a.GroupRole&&e[1].name===a.DetailsRole&&e[2].name===a.ValuesRole&&e[3].name===a.GradientRole&&e[4].name===a.TooltipRole},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=t[r],s=this.projectionsInfo[i];0===s.metadata.kind?(a.addGroupRole(n,s),n[a.GroupRole].addActiveQueryReference(s.projection.queryRef)):1===s.metadata.kind&&a.addValuesRole(n,s)}},n.prototype.processSecondaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=t[r];a.addDetailsRole(n,this.projectionsInfo[i])}},n}(s),m=function(e){function n(n,t,r){return e.call(this,n,t,r)||this}return __extends(n,e),n.prototype.validatePlugin=function(){var e=this.plugin.capabilities.dataRoles;return 3===e.length&&e[0].name===a.RowsRole&&e[1].name===a.ColumnsRole&&e[2].name===a.ValuesRole},n.prototype.build=function(e){var n=e.Primary.Groupings,t={};if(this.processPrimaryGroups(n,t),e.Secondary){var r=e.Secondary.Groupings;this.processSecondaryGroups(r,t)}return t},n.prototype.processPrimaryGroups=function(e,n){if(e)for(var t=0,r=e.length;t<r;t++)this.processPrimaryGroup(e[t],n)},n.prototype.processSecondaryGroups=function(e,n){if(e)for(var t=0,r=e.length;t<r;t++)this.processSecondaryGroup(e[t],n)},n.prototype.processPrimaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=(t[r],this.projectionsInfo[t[r]]);0===i.metadata.kind?(a.addRowsRole(n,i),n[a.RowsRole].addActiveQueryReference(i.projection.queryRef)):1===i.metadata.kind&&a.addValuesRole(n,i)}},n.prototype.processSecondaryGroup=function(e,n){for(var t=e.Projections,r=0,o=t.length;r<o;r++){var i=this.projectionsInfo[t[r]];a.addColumnsRole(n,i),n[a.ColumnsRole].addActiveQueryReference(i.projection.queryRef)}},n}(a)}(t=n.util||(n.util={}))}(t=n.infonav||(n.infonav={}))}(n=e.explore||(e.explore={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(n){var t;!function(t){var r=e.infonav.utils.InterpretUtil,a=e.common.helpers.ModelConverterHelper,o=function(){function t(e,t){this.services=t,this.placeholder=n.utils.QnaLanguageUtil.getPlaceholderText(this.services.localizationService),this.sendInterpretProbe()}return t.createOptions=function(){return{additionalServices:["$timeout","featureSwitchService","promiseFactory","conceptualSchemaProxy","localizationService"],scopedDependencies:["interpretProbe"]}},t.prototype.launchQna=function(){this.showQna(),this.services.$timeout(function(){return $(".qnaInputContainer #content").focus()})},t.prototype.sendInterpretProbe=function(e){var o=this,i=_.filter(this.models,function(e){return e&&a.getIsQnaSupported(e,o.services.featureSwitchService.featureSwitches)}),s=this.services.interpretProbe.probe(_.map(i,function(e){return r.createInterpretRequestScope(e)}),e),c=this.services.promiseFactory.defer();return s.then(function(e){o.placeholder=n.utils.QnaLanguageUtil.getPlaceholderText(o.services.localizationService,e),t.preloadConceptualSchemas(o.models||[],o.services.conceptualSchemaProxy),c.resolve({})},function(){c.reject()}),c.promise},t.preloadConceptualSchemas=function(e,n){for(var r=3,a=Math.min(e.length,r),o=0,i=_.take(e,a);o<i.length;o++){var s=i[o];n.get(t.createDataSourceArray(s))}},t.createDataSourceArray=function(n){return e.explore.contracts.createDataSourceArray([{type:"dsr",id:n.id,packageId:n.packageId,name:void 0,dsr:{schemaName:void 0,vsName:n.vsName,dbName:n.dbName,modelId:n.id}}])},t}();t.QnaInputLauncherController=o}(t=n.controllers||(n.controllers={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var n;!function(n){var t;!function(t){t.QnaInputLauncher={templateUrl:"qnaInputLauncher/qnaInputLauncher.html",bindings:{models:"=",showQna:"=",qnaStyle:"<"},controller:e.common.createController(n.controllers.QnaInputLauncherController)}}(t=n.components||(n.components={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={})),powerbi.infonav.registerInfonavBootstrapComponent("QnaInputLauncher");var powerbi;!function(e){var n;!function(e){var n;!function(n){function t(e,n,t,a,o){return new r(e,n,a,o||6e5)}n.createInterpretProbeService=t;var r=function(){function n(e,n,t,r){this.lazyScoped=e,this.promiseFactory=n,this.featureSwitchService=t,this.probePromiseCache=new a(r)}return n.prototype.probe=function(n,t,r){var a=e.utils.InterpretUtil.createInterpretRequestScopeWireContract(n,this.featureSwitchService.featureSwitches);return _.isEmpty(a.InterpretRequestSubscopes)?this.promiseFactory.reject():this.probeInternal(a,t,r).promise},n.prototype.isProbeCompleted=function(e){var n=this.probePromiseCache.getPromise(e);return n&&n.isComplete},n.prototype.probeInternal=function(e,n,t){var r=this,a=this.probePromiseCache.getPromise(e);if(!a){var o=this.promiseFactory.defer();a={promise:o.promise,waitingInterprets:t?[t]:[],isComplete:!1},this.probePromiseCache.setPromise(e,a),this.sendProbeRequest(e,n).then(function(e){o.resolve(e.data)},function(){o.reject(),r.probePromiseCache.clearPromise(e)}),o.promise.finally(function(){a.isComplete=!0;var e=a.waitingInterprets,n=e.length;if(n>0){e[n-1].runToCompletion().finally(function(){for(var t=0;t<n-1;t++)e[t].reject()})}a.waitingInterprets=[]})}return t&&a.waitingInterprets.push(t),a},n.prototype.sendProbeRequest=function(e,n){return this.lazyScoped("interpretProxy").then(function(t){return t.probe(e,n)})},n}(),a=function(){function e(e){this.cache={},this.expirationInMilliseconds=e}return e.prototype.getPromise=function(n){var t=e.getCacheKey(n),r=this.cache[t];return r&&r.expiration<Date.now()&&(delete this.cache[t],r=void 0),r},e.prototype.setPromise=function(n,t){t.expiration=Date.now()+this.expirationInMilliseconds,this.cache[e.getCacheKey(n)]=t},e.prototype.clearPromise=function(n){delete this.cache[e.getCacheKey(n)]},e.getCacheKey=function(e){return _(e.InterpretRequestSubscopes).sortBy(function(e){return e.DbMoniker.VirtualServerName}).sortBy(function(e){return e.DbMoniker.DatabaseName}).map(function(e){return e.DbMoniker.DatabaseName+":"+e.DbMoniker.VirtualServerName+(e.ReportIds?":"+e.ReportIds.join(","):"")}).value().join("::")},e}()}(n=e.services||(e.services={}))}(n=e.infonav||(e.infonav={}))}(powerbi||(powerbi={})),define("InfoNavBootstrap/services/qnaExplore",["require","exports"],function(e,n){function t(e,n,t,r,a,o){return new i(e,n,t,r,a,o)}Object.defineProperty(n,"__esModule",{value:!0});var r=powerbi,a=r.infonav.HostWarningConstants,o=r.explore.util.VisualContainerUtils;n.create=t;var i=function(){function e(e,n,t,r,a,o){this.$compile=e,this.featureSwitchService=n,this.eventBridge=t,this.lazyScoped=r,this.errorService=a,this.localizationService=o}return e.prototype.isSupported=function(e,n,t,r,o,i){return void 0===i&&(i=!1),__awaiter(this,void 0,powerbi.Promise,function(){var s,c,l;return __generator(this,function(u){switch(u.label){case 0:return!this.featureSwitchService.featureSwitches.qnaExplore||n&&!t||!r?[2,!1]:_.some(e.schemas,function(e){return!e.isExtensionSchema&&!_.isEmpty(e.entities)&&e.capabilities&&e.capabilities.supportsQna})?[4,this.lazyScoped("interpretProxy")]:[2,!1];case 1:return s=u.sent(),[4,s.probe(o?{InterpretRequestSubscopes:[{DbMoniker:o}]}:void 0,null)];case 2:return c=u.sent(),l=c&&!_.isEmpty(c.data)&&c.data[0].HostWarnings,l&&l.Code===a.MissingRuntimeModule&&!i&&this.errorService.infoCustom(this.localizationService.get("Qna_Explore_MissingBinariesTitle"),this.localizationService.get("Qna_Explore_MissingBinaries")),[2,!l||l.Code!==a.LanguageNotSupported&&l.Code!==a.SessionIsInactive&&l.Code!==a.MissingRuntimeModule]}})})},e.prototype.launch=function(e,n){var t=e.$new(),a={qnaCoreConfig:r.infonav.modules.QnaCoreModule,qnaArgs:{visualContainer:n}};_.assign(t,a);var i=this.$compile('<div class="qnaBox" pbi-lazy-load-contents="qnaCoreConfig"><qna-explore args="qnaArgs"></qna-explore></div>')(t);n.toolbar={element:$(i),theme:"lightTheme",removeOnBlur:_.noopTrue},this.eventBridge.publishToChannel(r.explore.services.events.visualContainerChanged,{affectContainer:o.contractEqualityComparator(n)})},e}()}),angular.module("powerbi.infonavbootstrap").run(["$templateCache",function(e){e.put("qnaInputLauncher/qnaInputLauncher.html",'<button class="qnaInputLauncher" ng-click="$ctrl.launchQna()" ng-style="$ctrl.qnaStyle"><span class="glyphicon pbi-glyph-qna icon"></span><span class="qnaInputLauncherText" ng-bind="$ctrl.placeholder"></span></button>')}]);